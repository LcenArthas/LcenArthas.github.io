<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" class="scroll-smooth" data-default-appearance="light"
  data-auto-appearance="true"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="zh-cn" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>《Pyhotn工匠——案例、技巧与工程实践》(上) &middot; 藏器于身</title>
  <meta name="title" content="《Pyhotn工匠——案例、技巧与工程实践》(上) &middot; 藏器于身" />
  
  <meta name="description" content="👋 Hi there!" />
  <meta name="keywords" content="技术书籍, Python, Python 图书, " />
  
  
  <link rel="canonical" href="https://lcenarthas.github.io/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/" />
  
  
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.cda344b73a5dc32f3dd70f4e7937badddb91d08c4c73bede61ded5ba040acf50dfc9a8a4c17ca565cc68c7e54aa7dd87ff1e482d30ad4cc3bb6cceea0dc17616.css"
    integrity="sha512-zaNEtzpdwy891w9OeTe63duR0IxMc77eYd7VugQKz1DfyaikwXylZcxox&#43;VKp92H/x5ILTCtTMO7bM7qDcF2Fg==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.d6c35110b5d7df8014403fbb81cd21a9d89daf9eb586c936e585e9d04adc204dce554aa737f81e8c902b9dea9e67bd63a977b77dedefb8a39430581ebc519207.js"
    integrity="sha512-1sNRELXX34AUQD&#43;7gc0hqdidr561hsk25YXp0ErcIE3OVUqnN/gejJArneqeZ71jqXe3fe3vuKOUMFgevFGSBw==" data-copy="" data-copied=""></script>
  
  
  <script src="/js/zoom.min.js"></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:url" content="https://lcenarthas.github.io/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/">
  <meta property="og:site_name" content="藏器于身">
  <meta property="og:title" content="《Pyhotn工匠——案例、技巧与工程实践》(上)">
  <meta property="og:description" content="👋 Hi there!">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="booknote">
    <meta property="article:published_time" content="2024-07-06T13:49:36+08:00">
    <meta property="article:modified_time" content="2024-07-06T13:49:36+08:00">
    <meta property="article:tag" content="技术书籍">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Python 图书">
    <meta property="og:image" content="https://lcenarthas.github.io/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/feature.png">
      <meta property="og:see_also" content="https://lcenarthas.github.io/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8B/">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://lcenarthas.github.io/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/feature.png">
  <meta name="twitter:title" content="《Pyhotn工匠——案例、技巧与工程实践》(上)">
  <meta name="twitter:description" content="👋 Hi there!">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "读书",
    "name": "《Pyhotn工匠——案例、技巧与工程实践》(上)",
    "headline": "《Pyhotn工匠——案例、技巧与工程实践》(上)",
    
    
    "inLanguage": "zh-cn",
    "url" : "https:\/\/lcenarthas.github.io\/booknote\/python%E5%B7%A5%E5%8C%A0%E4%B8%8A\/",
    "author" : {
      "@type": "Person",
      "name": "White Liu"
    },
    "copyrightYear": "2024",
    "dateCreated": "2024-07-06T13:49:36\u002b08:00",
    "datePublished": "2024-07-06T13:49:36\u002b08:00",
    
    "dateModified": "2024-07-06T13:49:36\u002b08:00",
    
    "keywords": ["技术书籍","Python","Python 图书"],
    
    "mainEntityOfPage": "true",
    "wordCount": "7943"
  }]
  </script>


  
  
  <meta name="author" content="White Liu" />
  
  
  
  <link href="https://x.com/shouwangzhelcen" rel="me" />
  
  
  <link href="https://github.com/LcenArthas" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.js" integrity=""></script>





















  
  

<script async src="https://www.googletagmanager.com/gtag/js?id=G-141Z1N2SC7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-141Z1N2SC7');
</script>


  
  
  <meta name="theme-color"/>
  
  
  
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script>

    const firebaseConfig = {
      apiKey: "AIzaSyBiDcuDTo1WuOz0CZ8otVxG5MzNw9c0UaU",
      authDomain: "AIzaSyBiDcuDTo1WuOz0CZ8otVxG5MzNw9c0UaU",
      projectId: "white-blog",
      storageBucket: "white-blog.appspot.com",
      messagingSenderId: "307372550909",
      appId: "1:307372550909:web:35143c5e7ad20e67cf2c94",
      measurementId: "G-141Z1N2SC7"
    };

    var app = firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();
    var auth = firebase.auth();

  </script>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>跳过正文</a>
  </div>
  
  
  <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    
    
    <div>
        <a href="/" class="flex">
            <span class="sr-only">藏器于身</span>

            <img src="/img/icon.png" width="36" height="36"
                class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="藏器于身" />

        </a>
    </div>
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">藏器于身</a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
            
  <a href="/blog/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        归档
    </p>
</a>


            
            
  <a href="/booknote/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        读书
    </p>
</a>


            
            
  <a href="/movienote/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        电影
    </p>
</a>


            
            
  <a href="/about/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        关于
    </p>
</a>


            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class="ltr:mr-14 rtl:ml-14 flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12 h-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400" style="margin-right:5px">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" for="menu-controller" class="block">
            <input type="checkbox" id="menu-controller" class="hidden" />
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li>
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                    
  <li class="mt-1">
    <a href="/blog/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            归档
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="/booknote/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            读书
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="/movienote/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            电影
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="/about/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            关于
        </p>
    </a>
</li>



                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>





  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/"
      ></a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/booknote/"
      >读书</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/"
      >《Pyhotn工匠——案例、技巧与工程实践》(上)</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      《Pyhotn工匠——案例、技巧与工程实践》(上)
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  





  



  



  



  



  





  



<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-07-06 13:49:36 &#43;0800 &#43;0800">2024-07-06</time><span class="px-2 text-primary-500">&middot;</span><span>7943 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">16 分钟</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="views_booknote/Python工匠（上）/index.md" class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title="views">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="likes_booknote/Python工匠（上）/index.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
    <button id="button_likes"
        class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400"
        onclick="process_article()">
        <span id="button_likes_heart" style="display:none" class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

 </span>
        <span id="button_likes_emtpty_heart" class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M244 84L255.1 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 0 232.4 0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84C243.1 84 244 84.01 244 84L244 84zM255.1 163.9L210.1 117.1C188.4 96.28 157.6 86.4 127.3 91.44C81.55 99.07 48 138.7 48 185.1V190.9C48 219.1 59.71 246.1 80.34 265.3L256 429.3L431.7 265.3C452.3 246.1 464 219.1 464 190.9V185.1C464 138.7 430.4 99.07 384.7 91.44C354.4 86.4 323.6 96.28 301.9 117.1L255.1 163.9z"/></svg>
  </span>

</span>
        <span id="button_likes_text">&nbsp;Like</span>
    </button>
</span><span class="px-2 text-primary-500">&middot;</span>


<script type="text/javascript" src="/js/zen-mode.min.ccc8b2a0c4505216444ca25530c7328aa0bef94f43dabaf3e598e1b4271de9eec76c1cb35917471a4f7ccb8d84051b3acef42baa30724ac3a667fcf1fec4432a.js" integrity="sha512-zMiyoMRQUhZETKJVMMcyiqC&#43;&#43;U9D2rrz5ZjhtCcd6e7HbByzWRdHGk98y42EBRs6zvQrqjBySsOmZ/zx/sRDKg=="></script>

<span class="mb-[2px]">
    <span id="zen-mode-button"
          class="text-lg hover:text-primary-500"
          title=""
          data-title-i18n-disable=""
          data-title-i18n-enable="">
        <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px">
    <path fill="currentColor" d="M 12.980469 4 C 9.1204688 4 5.9804688 7.14 5.9804688 11 L 6 26 L 9.9804688 26 L 9.9804688 11 C 9.9804688 9.35 11.320469 8 12.980469 8 L 40.019531 8 C 41.679531 8 43.019531 9.35 43.019531 11 L 43.019531 39 C 43.019531 40.65 41.679531 42 40.019531 42 L 29 42 C 29 43.54 28.420938 44.94 27.460938 46 L 40.019531 46 C 43.879531 46 47.019531 42.86 47.019531 39 L 47.019531 11 C 47.019531 7.14 43.879531 4 40.019531 4 L 12.980469 4 z M 7 28 C 4.794 28 3 29.794 3 32 L 3 42 C 3 44.206 4.794 46 7 46 L 23 46 C 25.206 46 27 44.206 27 42 L 27 32 C 27 29.794 25.206 28 23 28 L 7 28 z M 7 32 L 23 32 L 23.001953 42 L 7 42 L 7 32 z"/>
</svg>
  </span>

</span>
    </span>
</span>
  

  
  
</div>


<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
</div>




<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E6%8A%80%E6%9C%AF%E4%B9%A6%E7%B1%8D/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    技术书籍
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/python/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Python
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/python-%E5%9B%BE%E4%B9%A6/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Python 图书
  </span>
</span>
  </span>
  
  
  
  
</div>



    </div>

    
    
    
    
    

    

    
      
      
        
        
<div class="flex author">
  
    
    
      
    
    
      
        
      
      <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
      alt="White Liu" src="/img/crop_hu5738175937673966094.gif" />
    
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      作者
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      White Liu
    </div>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">江湖儿女江湖见，神仙之外有神仙</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://x.com/shouwangzhelcen"
          target="_blank"
          aria-label="X-Twitter"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/LcenArthas"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>

      

      

      
      <div class="mb-5"></div>
      

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10">

         <details open class="toc-right mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    目录
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#第-1-章-变量和注释">第 1 章 变量和注释</a>
      <ul>
        <li><a href="#1-变量的命名使用原则">1. 变量的命名使用原则</a>
          <ul>
            <li><a href="#1-星号表达式">1. 星号表达式</a></li>
            <li><a href="#2-给变量注明类型">2. 给变量注明类型</a></li>
            <li><a href="#3-变量命名原则">3. 变量命名原则</a></li>
            <li><a href="#4-保持变量的一致性">4. 保持变量的一致性</a></li>
          </ul>
        </li>
        <li><a href="#2-注释的注意事项">2. 注释的注意事项</a>
          <ul>
            <li><a href="#1-接口注释">1. 接口注释</a></li>
            <li><a href="#2-空行也是一种-注释">2. 空行也是一种 “注释”</a></li>
            <li><a href="#3-先写注释后写代码">3. 先写注释，后写代码</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#第-2-章-数值与字符串">第 2 章 数值与字符串</a>
      <ul>
        <li><a href="#1-数值的基础知识">1. 数值的基础知识</a>
          <ul>
            <li><a href="#1-decimal-模块">1. decimal 模块</a></li>
          </ul>
        </li>
        <li><a href="#2-字符串的使用">2. 字符串的使用</a>
          <ul>
            <li><a href="#1-字符串的内置方法">1. 字符串的内置方法</a></li>
            <li><a href="#2-字符串格式化">2. 字符串格式化</a></li>
            <li><a href="#3-jinja2-模板处理字符串">3. Jinja2 模板处理字符串</a></li>
          </ul>
        </li>
        <li><a href="#3-timeit-模块测试性能">3. timeit 模块测试性能</a></li>
      </ul>
    </li>
    <li><a href="#第-3-章-容器类型">第 3 章 容器类型</a>
      <ul>
        <li><a href="#1-列表">1. 列表</a>
          <ul>
            <li><a href="#1-插入数据">1. 插入数据</a></li>
            <li><a href="#2-判断成员是否存在">2. 判断成员是否存在</a></li>
          </ul>
        </li>
        <li><a href="#2-元组">2. 元组</a>
          <ul>
            <li><a href="#1-存放结构化数据">1. 存放结构化数据</a></li>
            <li><a href="#2-具名数组">2. 具名数组</a></li>
          </ul>
        </li>
        <li><a href="#3-字典">3. 字典</a>
          <ul>
            <li><a href="#1-访问不存在的-key">1. 访问不存在的 Key</a></li>
            <li><a href="#2-快速合并字典">2. 快速合并字典</a></li>
          </ul>
        </li>
        <li><a href="#4-集合">4. 集合</a></li>
        <li><a href="#5-对象的可变性">5. 对象的可变性</a></li>
        <li><a href="#6-深拷贝与浅拷贝">6. 深拷贝与浅拷贝</a>
          <ul>
            <li><a href="#1-浅拷贝">1. 浅拷贝</a></li>
            <li><a href="#2-深拷贝">2. 深拷贝</a></li>
          </ul>
        </li>
        <li><a href="#7-对象的可哈希性">7. 对象的可哈希性</a></li>
        <li><a href="#8-生成器">8. 生成器</a></li>
      </ul>
    </li>
    <li><a href="#第-4-章-条件分支控制流">第 4 章 条件分支控制流</a>
      <ul>
        <li><a href="#1-分支惯用写法">1. 分支惯用写法</a>
          <ul>
            <li><a href="#1-不要显式地和布尔值做比较">1. 不要显式地和布尔值做比较</a></li>
            <li><a href="#2-省略零值判断">2. 省略零值判断</a></li>
            <li><a href="#3-与none比较时使用is运算符">3. 与None比较时使用is运算符*</a></li>
          </ul>
        </li>
        <li><a href="#2-常用函数优化分支">2. 常用函数优化分支</a>
          <ul>
            <li><a href="#1-使用bisect优化范围类分支判断">1. 使用bisect优化范围类分支判断</a></li>
            <li><a href="#2-allany-函数">2. all()/any() 函数</a></li>
          </ul>
        </li>
        <li><a href="#3-其他技巧">3. 其他技巧</a>
          <ul>
            <li><a href="#1-要竭尽所能地避免分支嵌套">1. 要竭尽所能地避免分支嵌套</a></li>
            <li><a href="#2-德摩根定律">2. 德摩根定律</a></li>
            <li><a href="#3-and和or的运算优先级">3. and和or的运算优先级</a></li>
            <li><a href="#4-or运算符的陷阱">4. or运算符的陷阱</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#第-5-章-异常与错误处理">第 5 章 异常与错误处理</a>
      <ul>
        <li><a href="#1-异常捕获的经验技巧">1. 异常捕获的经验技巧</a>
          <ul>
            <li><a href="#1-优先使用异常捕获">1. 优先使用异常捕获</a></li>
            <li><a href="#2-tryexcept结构">2. try/except结构</a></li>
            <li><a href="#3-把更精确的-except-语句放在前面">3. 把更精确的 except 语句放在前面</a></li>
            <li><a href="#4-else-分支">4. else 分支</a></li>
            <li><a href="#5-raise-语句">5. raise 语句</a></li>
            <li><a href="#6-可以自定义异常类">6. 可以自定义异常类</a></li>
            <li><a href="#7-不要手动做数据校验">7. 不要手动做数据校验</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#第-6-章-循环与可迭代对象">第 6 章 循环与可迭代对象</a>
      <ul>
        <li><a href="#1-iter-与-next-内置函数">1. iter() 与 next() 内置函数</a></li>
        <li><a href="#2-自定义迭代器">2. 自定义迭代器</a></li>
        <li><a href="#3-生成器是迭代器">3. 生成器是迭代器</a></li>
        <li><a href="#4-修饰可迭代对象优化循环">4. 修饰可迭代对象优化循环</a>
          <ul>
            <li><a href="#5-读取大文件">5. 读取大文件</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    目录
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#第-1-章-变量和注释">第 1 章 变量和注释</a>
      <ul>
        <li><a href="#1-变量的命名使用原则">1. 变量的命名使用原则</a>
          <ul>
            <li><a href="#1-星号表达式">1. 星号表达式</a></li>
            <li><a href="#2-给变量注明类型">2. 给变量注明类型</a></li>
            <li><a href="#3-变量命名原则">3. 变量命名原则</a></li>
            <li><a href="#4-保持变量的一致性">4. 保持变量的一致性</a></li>
          </ul>
        </li>
        <li><a href="#2-注释的注意事项">2. 注释的注意事项</a>
          <ul>
            <li><a href="#1-接口注释">1. 接口注释</a></li>
            <li><a href="#2-空行也是一种-注释">2. 空行也是一种 “注释”</a></li>
            <li><a href="#3-先写注释后写代码">3. 先写注释，后写代码</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#第-2-章-数值与字符串">第 2 章 数值与字符串</a>
      <ul>
        <li><a href="#1-数值的基础知识">1. 数值的基础知识</a>
          <ul>
            <li><a href="#1-decimal-模块">1. decimal 模块</a></li>
          </ul>
        </li>
        <li><a href="#2-字符串的使用">2. 字符串的使用</a>
          <ul>
            <li><a href="#1-字符串的内置方法">1. 字符串的内置方法</a></li>
            <li><a href="#2-字符串格式化">2. 字符串格式化</a></li>
            <li><a href="#3-jinja2-模板处理字符串">3. Jinja2 模板处理字符串</a></li>
          </ul>
        </li>
        <li><a href="#3-timeit-模块测试性能">3. timeit 模块测试性能</a></li>
      </ul>
    </li>
    <li><a href="#第-3-章-容器类型">第 3 章 容器类型</a>
      <ul>
        <li><a href="#1-列表">1. 列表</a>
          <ul>
            <li><a href="#1-插入数据">1. 插入数据</a></li>
            <li><a href="#2-判断成员是否存在">2. 判断成员是否存在</a></li>
          </ul>
        </li>
        <li><a href="#2-元组">2. 元组</a>
          <ul>
            <li><a href="#1-存放结构化数据">1. 存放结构化数据</a></li>
            <li><a href="#2-具名数组">2. 具名数组</a></li>
          </ul>
        </li>
        <li><a href="#3-字典">3. 字典</a>
          <ul>
            <li><a href="#1-访问不存在的-key">1. 访问不存在的 Key</a></li>
            <li><a href="#2-快速合并字典">2. 快速合并字典</a></li>
          </ul>
        </li>
        <li><a href="#4-集合">4. 集合</a></li>
        <li><a href="#5-对象的可变性">5. 对象的可变性</a></li>
        <li><a href="#6-深拷贝与浅拷贝">6. 深拷贝与浅拷贝</a>
          <ul>
            <li><a href="#1-浅拷贝">1. 浅拷贝</a></li>
            <li><a href="#2-深拷贝">2. 深拷贝</a></li>
          </ul>
        </li>
        <li><a href="#7-对象的可哈希性">7. 对象的可哈希性</a></li>
        <li><a href="#8-生成器">8. 生成器</a></li>
      </ul>
    </li>
    <li><a href="#第-4-章-条件分支控制流">第 4 章 条件分支控制流</a>
      <ul>
        <li><a href="#1-分支惯用写法">1. 分支惯用写法</a>
          <ul>
            <li><a href="#1-不要显式地和布尔值做比较">1. 不要显式地和布尔值做比较</a></li>
            <li><a href="#2-省略零值判断">2. 省略零值判断</a></li>
            <li><a href="#3-与none比较时使用is运算符">3. 与None比较时使用is运算符*</a></li>
          </ul>
        </li>
        <li><a href="#2-常用函数优化分支">2. 常用函数优化分支</a>
          <ul>
            <li><a href="#1-使用bisect优化范围类分支判断">1. 使用bisect优化范围类分支判断</a></li>
            <li><a href="#2-allany-函数">2. all()/any() 函数</a></li>
          </ul>
        </li>
        <li><a href="#3-其他技巧">3. 其他技巧</a>
          <ul>
            <li><a href="#1-要竭尽所能地避免分支嵌套">1. 要竭尽所能地避免分支嵌套</a></li>
            <li><a href="#2-德摩根定律">2. 德摩根定律</a></li>
            <li><a href="#3-and和or的运算优先级">3. and和or的运算优先级</a></li>
            <li><a href="#4-or运算符的陷阱">4. or运算符的陷阱</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#第-5-章-异常与错误处理">第 5 章 异常与错误处理</a>
      <ul>
        <li><a href="#1-异常捕获的经验技巧">1. 异常捕获的经验技巧</a>
          <ul>
            <li><a href="#1-优先使用异常捕获">1. 优先使用异常捕获</a></li>
            <li><a href="#2-tryexcept结构">2. try/except结构</a></li>
            <li><a href="#3-把更精确的-except-语句放在前面">3. 把更精确的 except 语句放在前面</a></li>
            <li><a href="#4-else-分支">4. else 分支</a></li>
            <li><a href="#5-raise-语句">5. raise 语句</a></li>
            <li><a href="#6-可以自定义异常类">6. 可以自定义异常类</a></li>
            <li><a href="#7-不要手动做数据校验">7. 不要手动做数据校验</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#第-6-章-循环与可迭代对象">第 6 章 循环与可迭代对象</a>
      <ul>
        <li><a href="#1-iter-与-next-内置函数">1. iter() 与 next() 内置函数</a></li>
        <li><a href="#2-自定义迭代器">2. 自定义迭代器</a></li>
        <li><a href="#3-生成器是迭代器">3. 生成器是迭代器</a></li>
        <li><a href="#4-修饰可迭代对象优化循环">4. 修饰可迭代对象优化循环</a>
          <ul>
            <li><a href="#5-读取大文件">5. 读取大文件</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>

 
<script>
  (function () {
    var $toc = $('#TableOfContents');
    if ($toc.length > 0) {
      var $window = $(window);

      function onScroll() {
        var currentScroll = $window.scrollTop();
        var h = $('.anchor');
        var id = "";
        h.each(function (i, e) {
          e = $(e);
          if (e.offset().top - $(window).height()/3 <= currentScroll) {
            id = decodeURIComponent(e.attr('id'));
          }
        });
        var active = $toc.find('a.active');      
        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

        active.each(function (i, e) {
           
            $(e).removeClass('active').siblings('ul').hide();
          
        });
        $toc.find('a[href="#' + id + '"]').addClass('active')
        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
          $(e).children('a').parents('ul').show();          
        });
      }

      $window.on('scroll', onScroll);
      $(document).ready(function () {
         
          $toc.find('a').parent('li').find('ul').hide();
        
        onScroll();
      });
    }
  })();
</script>

   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        
<details style="margin-left:0px" class="mt-2 mb-5 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5"  open >
    
    <summary
        class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-primary-800 dark:text-neutral-100">
        《Python工匠》 - 这篇文章属于一个选集。
    </summary>
    
    
    
    <div
        class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
        § 0: 本文
    </div>
    
    
    
    <div
        class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
        <a href="https://lcenarthas.github.io/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8B/">
            § 1: 《Pyhotn工匠——案例、技巧与工程实践》（下）
        </a>
    </div>
    
    


</details>



        <div class="article-content max-w-prose mb-20">
          <p><a href="https://book.douban.com/subject/35723705/"   target="_blank">
    




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/douban_hu11455103170365620097.png 330w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/douban_hu12596153218953596222.png 660w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/douban_hu8649003936652710858.png 1024w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/douban_hu6371376477800181403.png 2x"
        src="/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/douban_hu12596153218953596222.png"
        alt="technology article"
      />
      
      
    </figure>
  

</a></p>
<blockquote>
<p>适合进阶 Python。本书类似 Python Cookbook 或者 Fluent Python，但是更偏重工程实践，不止于概念 Tricks 本身，更在乎如何用这些技术的最佳实践构建出可靠、优雅和 Pythonic 的工程。由于是新书，里面的概念还是比较新，type hints与mypy的类型检查方案是有的，但是似乎没有对 PEP 585 进行修订。</p>
<p>—— 豆瓣网友@歧路花火 2022-05-20 18:18:42</p>
</blockquote>


<h2 class="relative group">第 1 章 变量和注释 
    <div id="%E7%AC%AC-1-%E7%AB%A0-%E5%8F%98%E9%87%8F%E5%92%8C%E6%B3%A8%E9%87%8A" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%AC%AC-1-%E7%AB%A0-%E5%8F%98%E9%87%8F%E5%92%8C%E6%B3%A8%E9%87%8A" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>在一段代码中，变量和注释是最接近自然语言的东西。因此好的变量名、简明扼要的注释，都可以显著提高代码的质量。</p>
<p>这一章主要是介绍了常用的变量命名的原则，介绍了编程写代码的注释的集中方式。</p>


<h3 class="relative group">1. 变量的命名使用原则 
    <div id="1-%E5%8F%98%E9%87%8F%E7%9A%84%E5%91%BD%E5%90%8D%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E5%8F%98%E9%87%8F%E7%9A%84%E5%91%BD%E5%90%8D%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. 星号表达式 
    <div id="1-%E6%98%9F%E5%8F%B7%E8%A1%A8%E8%BE%BE%E5%BC%8F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E6%98%9F%E5%8F%B7%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>可以使用星号表达式（*variables）作为变量名，他便会贪婪地捕获多个值对象，并将捕获到的内容作为列表赋值给 variables 。</p>
<p>例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;piglei&#39;</span><span class="p">,</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">username</span><span class="p">,</span> <span class="o">*</span><span class="n">fruits</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="n">data</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">username</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;piglei&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">fruits</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">score</span>
</span></span><span class="line"><span class="cl"><span class="mi">100</span>
</span></span></code></pre></div><p>有时候可以配合单下划线  _ 使用，通常可以在想要忽视某些变量时候使用，</p>
<p>例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 忽略展开时的第二个变量</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">author</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">usernames</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 忽略第一个和最后一个变量之间的所有变量</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">username</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="n">data</span>
</span></span></code></pre></div>

<h4 class="relative group">2. 给变量注明类型 
    <div id="2-%E7%BB%99%E5%8F%98%E9%87%8F%E6%B3%A8%E6%98%8E%E7%B1%BB%E5%9E%8B" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E7%BB%99%E5%8F%98%E9%87%8F%E6%B3%A8%E6%98%8E%E7%B1%BB%E5%9E%8B" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>因为 Python 是动态类型语言，使用变量时不需要做任何的类型声明。但是为了代码的可读性，还是建议使用类型注解（Python3.5+版本）。</p>
<p>要使用类型注解，只需要在变量后添加类型，并用冒号隔开即可，比如 <code>func(value: str)</code> 表示函数的 value 参数为字符串类型.</p>


<h4 class="relative group">3. 变量命名原则 
    <div id="3-%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D%E5%8E%9F%E5%88%99" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D%E5%8E%9F%E5%88%99" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>变量起名要遵循 <a href="https://wangmeng-python.readthedocs.io/en/latest/readability/PEP8.html"   target="_blank">
    PEP8 原则</a>。</p>
<p>尽量给变量起描述性强的名字，同时变量名尽量短。</p>
<p>其中有一类<strong>超短命名</strong>，使用一两个字母来命名，下面是一些约定俗成的变量名字：</p>
<ul>
<li>数组索引三剑客 i、j、k</li>
<li>某个整数 n</li>
<li>某个字符串 s</li>
<li>某个异常 e</li>
<li>文件对象 fp</li>
</ul>
<p>同一段代码中尽量避免多个相似的变量名，比如同时使用 <code>users</code>，<code>users1</code>，<code>uesrs2</code> 这种序列。</p>


<h4 class="relative group">4. 保持变量的一致性 
    <div id="4-%E4%BF%9D%E6%8C%81%E5%8F%98%E9%87%8F%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4-%E4%BF%9D%E6%8C%81%E5%8F%98%E9%87%8F%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>使用变量时，需要保证他在两方面的一致性，名字一致性和类型一致性。</p>
<p><strong>名字一致性</strong>是指在同一个项目（或者模块、函数）中，对一类事物的称呼不要变来变去。</p>
<p><strong>类型一致性</strong>则是指不要把同一个变量重复指向不同类型的值。举例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># users 本身是一个 Dict</span>
</span></span><span class="line"><span class="cl">    <span class="n">users</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;piglei&#39;</span><span class="p">,</span> <span class="s1">&#39;raymond&#39;</span><span class="p">]}</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># users 这个名字真不错！尝试复用它，把它变成 List 类型</span>
</span></span><span class="line"><span class="cl">    <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span></code></pre></div><p>在 <code>foo()</code> 函数的作用域内，<code>users</code> 变量被使用了两次：第一次指向字典，第二次则变成了列表。</p>


<h3 class="relative group">2. 注释的注意事项 
    <div id="2-%E6%B3%A8%E9%87%8A%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E6%B3%A8%E9%87%8A%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. 接口注释 
    <div id="1-%E6%8E%A5%E5%8F%A3%E6%B3%A8%E9%87%8A" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E6%8E%A5%E5%8F%A3%E6%B3%A8%E9%87%8A" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>在编写接口文档时，我们应该站在函数设计者的角度，着重描述<strong>函数的功能</strong>、<strong>参数说明</strong>等。</p>
<p>而函数自身的实现细节——比如调用了哪个第三方模块、为啥有性能问题等，都不用放在接口文档里。</p>
<p>对于 <code>resize_image()</code> 函数来说，文档里提供以下内容就足够了：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">resize_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;将图片缩放为指定尺寸，并返回新的图片。
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    注意：当文件超过 5MB 时，请使用 resize_big_image()
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    :param image: 图片文件对象
</span></span></span><span class="line"><span class="cl"><span class="s2">    :param size: 包含宽高的元组：（width, height）
</span></span></span><span class="line"><span class="cl"><span class="s2">    :return: 新图片对象
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span></code></pre></div>

<h4 class="relative group">2. 空行也是一种 “注释” 
    <div id="2-%E7%A9%BA%E8%A1%8C%E4%B9%9F%E6%98%AF%E4%B8%80%E7%A7%8D-%E6%B3%A8%E9%87%8A" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E7%A9%BA%E8%A1%8C%E4%B9%9F%E6%98%AF%E4%B8%80%E7%A7%8D-%E6%B3%A8%E9%87%8A" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>在写代码时，我们可以适当的在代码中插入空行，把代码按不同的逻辑块分隔开来，这样能有效提高代码可读性。</p>


<h4 class="relative group">3. 先写注释，后写代码 
    <div id="3-%E5%85%88%E5%86%99%E6%B3%A8%E9%87%8A%E5%90%8E%E5%86%99%E4%BB%A3%E7%A0%81" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-%E5%85%88%E5%86%99%E6%B3%A8%E9%87%8A%E5%90%8E%E5%86%99%E4%BB%A3%E7%A0%81" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>主要是为了避免写完代码之后，对待注释草草应付了事。</p>


<h2 class="relative group">第 2 章 数值与字符串 
    <div id="%E7%AC%AC-2-%E7%AB%A0-%E6%95%B0%E5%80%BC%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%AC%AC-2-%E7%AB%A0-%E6%95%B0%E5%80%BC%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>这一章主要是介绍了 Python 中数值的基础知识和字符串的使用技巧。</p>


<h3 class="relative group">1. 数值的基础知识 
    <div id="1-%E6%95%B0%E5%80%BC%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E6%95%B0%E5%80%BC%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. decimal 模块 
    <div id="1-decimal-%E6%A8%A1%E5%9D%97" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-decimal-%E6%A8%A1%E5%9D%97" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>Python 的浮点数有精度问题，可以使用 <code>decimal.Decimal</code> 对象来代替普通浮点数，做精确计算。例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 注意：这里的&#39;0.1&#39;和&#39;0.2&#39; 必须是字符串</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.2&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.3&#39;</span><span class="p">)</span>
</span></span></code></pre></div>
  



<div
  
    class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"
  >

  <span
    
      class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >在使用 Decimal 的过程中，需要注意：必须使用字符串来表示数字。</span>
</div>



<h3 class="relative group">2. 字符串的使用 
    <div id="2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%BD%BF%E7%94%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%BD%BF%E7%94%A8" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. 字符串的内置方法 
    <div id="1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>记录了字符串中常用和不常用的方法：</p>
<ol>
<li><code>reversed</code>，反转字符串</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;Hello, world!&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;!dlrow ,olleH&#39;</span>
</span></span></code></pre></div><p><code>reversed</code> 会返回一个可迭代对象，通过字符串的 <code>.join</code> 方法可以将它转换为字符串。</p>
<ol start="2">
<li><code>.startswith()</code>，检查字符串是否以指定的前缀开始。它返回布尔值 True 或 False。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">text</span> <span class="o">=</span> <span class="s2">&#34;Hello, world!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&#34;Hello&#34;</span><span class="p">))</span>  <span class="c1"># 输出: True</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&#34;world&#34;</span><span class="p">))</span>  <span class="c1"># 输出: False</span>
</span></span></code></pre></div><ol start="3">
<li><code>.partation()</code>，用于在第一次出现指定 <em>分隔符</em> 的位置将字符串分成三部分：<br>
分隔符前的部分、分隔符本身、和分隔符后的部分。它返回一个包含这三部分的元组。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">text</span> <span class="o">=</span> <span class="s2">&#34;Hello, world!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s2">&#34;, &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>  <span class="c1"># 输出: (&#39;Hello&#39;, &#39;, &#39;, &#39;world!&#39;)</span>
</span></span></code></pre></div><p>和 <code>.split()</code> 的区别，<code>.partition()</code> 返回了一个三元素的元组，而 <code>.split()</code> 返回了一个列表，并且列表中<strong>不包含分隔符</strong>。</p>
<ol start="4">
<li><code>.translate(table)</code>，按规则一次性替换多个字符，使用它比调用多次 <code>replace</code> 方法更快也更简单。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;明明是中文,却使用了英文标点.&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建替换规则表：&#39;,&#39; -&gt; &#39;，&#39;, &#39;.&#39; -&gt; &#39;。&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">maketrans</span><span class="p">(</span><span class="s1">&#39;,.&#39;</span><span class="p">,</span> <span class="s1">&#39;，。&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;明明是中文，却使用了英文标点。&#39;</span>
</span></span></code></pre></div><ol start="5">
<li><code>.rsplit()</code>，就是 <code>split()</code> 的镜像“逆序”方法。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#从右往左切割，None表示以所有的空白字符串切割</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">log_line</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;&#34;AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36&#34;&#39;</span><span class="p">,</span> <span class="s1">&#39;47632&#39;</span><span class="p">]</span>
</span></span></code></pre></div>

<h4 class="relative group">2. 字符串格式化 
    <div id="2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>推荐使用 f-string 字符串格式化。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="n">username</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="s1">&#39;piglei&#39;</span><span class="p">,</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># f-string，最短最直观</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Welcome </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s1">, your score is </span><span class="si">{</span><span class="n">score</span><span class="si">:</span><span class="s1">d</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 输出：</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Welcome piglei, your score is 100</span>
</span></span></code></pre></div>

<h4 class="relative group">3. Jinja2 模板处理字符串 
    <div id="3-jinja2-%E6%A8%A1%E6%9D%BF%E5%A4%84%E7%90%86%E5%AD%97%E7%AC%A6%E4%B8%B2" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-jinja2-%E6%A8%A1%E6%9D%BF%E5%A4%84%E7%90%86%E5%AD%97%E7%AC%A6%E4%B8%B2" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>Jinja2 是一个用于 Python 的模板引擎，可以用来生成动态内容。它通过在模板中嵌入变量和控制结构（如循环和条件）来处理字符串。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Template</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">_MOVIES_TMPL</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span><span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="s1">Welcome, {{username}}.
</span></span></span><span class="line"><span class="cl"><span class="s1">{</span><span class="si">%f</span><span class="s1">or name, rating in movies %}
</span></span></span><span class="line"><span class="cl"><span class="s1">* {{ name }}, Rating: {{ rating|default(&#34;[NOT RATED]&#34;, True) }}
</span></span></span><span class="line"><span class="cl"><span class="s1">{</span><span class="si">%- e</span><span class="s1">ndfor %}
</span></span></span></code></pre></div><p>这个字符串 _MOVIES_TMPL 是一个 Jinja2 模板，包含以下内容：</p>
<ul>
<li>{{username}} 是一个占位符，将被传入的 username 变量替换。</li>
<li>{%for name, rating in movies %}&hellip;{% endfor %} 是一个循环结构，用于遍历传入的 movies 列表。</li>
<li>{{ name }} 是每部电影的名字，占位符将被电影的名字替换。</li>
<li>{{ rating|default(&quot;[NOT RATED]&quot;, True) }} 是电影的评分，占位符将被电影的评分替换。如果评分不存在，则使用默认值 [NOT RATED]。</li>
</ul>


<h3 class="relative group">3. timeit 模块测试性能 
    <div id="3-timeit-%E6%A8%A1%E5%9D%97%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-timeit-%E6%A8%A1%E5%9D%97%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>Python有一个内置模块timeit，利用它，我们可以非常方便地测试代码的执行效率。</p>
<p>首先，定义需要测试的两个函数：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#定义一个长度为 100的词汇列表</span>
</span></span><span class="line"><span class="cl"><span class="n">WORDS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Hello&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;performance&#39;</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">25</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">str_cat</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;使用字符串拼接&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">WORDS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">s</span> <span class="o">+=</span> <span class="n">word</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">s</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">str_join</span><span class="p">():</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;使用列表配合 join 产生字符串&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">WORDS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</span></span></code></pre></div><p>然后，导入timeit模块，定义性能测试：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">timeit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 默认执行 100 万次</span>
</span></span><span class="line"><span class="cl"><span class="n">cat_spent</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="n">setup</span><span class="o">=</span><span class="s1">&#39;from __main__import str_cat&#39;</span><span class="p">,</span> <span class="n">stmt</span><span class="o">=</span><span class="s1">&#39;str_cat()&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;cat_spent:&#34;</span><span class="p">,</span> <span class="n">cat_spent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">join_spent</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="n">setup</span><span class="o">=</span><span class="s1">&#39;from __main__import str_join&#39;</span><span class="p">,</span> <span class="n">stmt</span><span class="o">=</span><span class="s1">&#39;str_join()&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;join_spent&#34;</span><span class="p">,</span> <span class="n">join_spent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 输出</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cat_spent: 7.844882188</span>
</span></span><span class="line"><span class="cl"><span class="c1"># join_spent 7.310863505</span>
</span></span></code></pre></div>

<h2 class="relative group">第 3 章 容器类型 
    <div id="%E7%AC%AC-3-%E7%AB%A0-%E5%AE%B9%E5%99%A8%E7%B1%BB%E5%9E%8B" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%AC%AC-3-%E7%AB%A0-%E5%AE%B9%E5%99%A8%E7%B1%BB%E5%9E%8B" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>讲解了四种容器类型，<strong>列表</strong>，<strong>元组</strong>，<strong>字典</strong>，<strong>集合</strong>。同时介绍了对象的可变性、可哈希性等概念。</p>


<h3 class="relative group">1. 列表 
    <div id="1-%E5%88%97%E8%A1%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E5%88%97%E8%A1%A8" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>这里主要记录列表的性能陷阱</p>


<h4 class="relative group">1. 插入数据 
    <div id="1-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>如果要在头部插入数据，使用 <code>.insert()</code> 平均时间复杂度是 O(n)（尾部插入数据使用 <code>.append()</code> 平均复杂度是 O(1)）。</p>
<p>如果需要往列表头部插入数据，使用 <code>collections.deque</code> 类型来替代列表（代码如下）。因为 deque 底层使用了双端队列，无论在头部还是尾部追加成员，时间复杂度都是 O（1）。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
</span></span><span class="line"><span class="cl">　
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">deque_append</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;不断往尾部追加&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">l</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5000</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">　
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">deque_appendleft</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;不断往头部插入&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">l</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5000</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">　
</span></span><span class="line"><span class="cl"><span class="c1"># timeit 性能测试代码已省略</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># deque_append: 3.739269677</span>
</span></span><span class="line"><span class="cl"><span class="c1"># deque_appendleft 3.7188512409999994</span>
</span></span></code></pre></div>

<h4 class="relative group">2. 判断成员是否存在 
    <div id="2-%E5%88%A4%E6%96%AD%E6%88%90%E5%91%98%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E5%88%A4%E6%96%AD%E6%88%90%E5%91%98%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>要判断某个容器是否包含特定成员，用<strong>集合</strong>比用列表更合适。</p>
<p>完成这种操作需要的时间复杂度是O（1）。</p>
<p>如果代码需要进行 <code>in</code> 判断，可以考虑把目标容器转换成集合类型，作为查找时的索引使用：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#注意：这里的示例列表很短，所以转不转集合对性能的影响可能微乎其微</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 在实际编码时，列表越长、执行的判断次数越多，转成集合的收益就越高</span>
</span></span><span class="line"><span class="cl"><span class="n">VALID_NAMES</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;piglei&#34;</span><span class="p">,</span> <span class="s2">&#34;raymond&#34;</span><span class="p">,</span> <span class="s2">&#34;bojack&#34;</span><span class="p">,</span> <span class="s2">&#34;caroline&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 转换为集合类型专门用于成员判断</span>
</span></span><span class="line"><span class="cl"><span class="n">VALID_NAMES_SET</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">VALID_NAMES</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">　　
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">validate_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_NAMES_SET</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> is not a valid name!&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>这样的话一次转换成集合 O（n）之后，后面查找都可以在 O（1）内。</p>


<h3 class="relative group">2. 元组 
    <div id="2-%E5%85%83%E7%BB%84" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E5%85%83%E7%BB%84" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. 存放结构化数据 
    <div id="1-%E5%AD%98%E6%94%BE%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E5%AD%98%E6%94%BE%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>和列表不同，在同一个元组里可以出现不同类型的值，因此元组经常用来存放结构化数据。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">user_info</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;piglei&#39;</span><span class="p">,</span> <span class="s1">&#39;MALE&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">user_info</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="mi">30</span>
</span></span></code></pre></div>

<h4 class="relative group">2. 具名数组 
    <div id="2-%E5%85%B7%E5%90%8D%E6%95%B0%E7%BB%84" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E5%85%B7%E5%90%8D%E6%95%B0%E7%BB%84" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>具名元组（namedtuple）。具名元组在保留普通元组功能的基础上，允许为元组的每个成员命名，这样你便能通过名称而不止是数字索引访问成员。（结构化数据）</p>
<p>用到 <code>namedtuple()</code> 函数创建具名数组：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Rectangle</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Rectangle&#39;</span><span class="p">,</span> <span class="s1">&#39;width, height&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rect</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">rect</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">rect</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 100</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 100</span>
</span></span></code></pre></div><p>【推荐】在Python 3.6版本以后，除了使用 <code>namedtuple() </code>函数以外，你还可以用 <code>typing.NamedTuple</code> 和类型注解语法来定义具名元组类型。</p>
<p>另外对于这种未来可能会变动的多返回值函数来说，如果一开始就使用 <code>NamedTuple</code> 类型对返回结果进行建模，后面改动会变得简单许多:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Rectangle</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span>
</span></span><span class="line"><span class="cl">    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rect</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</span></span></code></pre></div>

<h3 class="relative group">3. 字典 
    <div id="3-%E5%AD%97%E5%85%B8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-%E5%AD%97%E5%85%B8" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. 访问不存在的 Key 
    <div id="1-%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84-key" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84-key" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>当用不存在的键访问字典内容时，程序会抛出 KeyError 异常。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">rating</span> <span class="o">=</span> <span class="n">movie</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">rating</span> <span class="o">=</span> <span class="mi">0</span>
</span></span></code></pre></div>

<h4 class="relative group">2. 快速合并字典 
    <div id="2-%E5%BF%AB%E9%80%9F%E5%90%88%E5%B9%B6%E5%AD%97%E5%85%B8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E5%BF%AB%E9%80%9F%E5%90%88%E5%B9%B6%E5%AD%97%E5%85%B8" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>在不改变原字典内容的前提下，采用双星号 ** 运算符来做解包操作。在字典中使用 **dict_obj 表达式，可以动态解包 dict_obj 字典的所有内容，并与当前字典合并：</p>
<p>解包过程会默认进行<a href="#7-%e6%b7%b1%e6%8b%b7%e8%b4%9d%e4%b8%8e%e6%b5%85%e6%8b%b7%e8%b4%9d"  >
    浅拷贝</a>操作。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">d1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;apple&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">d2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># d1、d2 原始值不会受影响</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="o">**</span><span class="n">d1</span><span class="p">,</span> <span class="o">**</span><span class="n">d2</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
</span></span></code></pre></div>

<h3 class="relative group">4. 集合 
    <div id="4-%E9%9B%86%E5%90%88" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4-%E9%9B%86%E5%90%88" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>集合只能存放<a href="#7-%e5%af%b9%e8%b1%a1%e7%9a%84%e5%8f%af%e5%93%88%e5%b8%8c%e6%80%a7"  >
    可哈希</a>的对象。</p>


<h3 class="relative group">5. 对象的可变性 
    <div id="5-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%AF%E5%8F%98%E6%80%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#5-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%AF%E5%8F%98%E6%80%A7" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>Python里的内置数据类型，大致上可分为可变与不可变两种。</p>
<ul>
<li>可变（mutable）：列表、字典、集合。</li>
<li>不可变（immutable）：整数、浮点数、字符串、字节串、元组。</li>
</ul>
<p>一个最常见的场景“函数调用”:</p>
<p>在对字符串进行 += 操作时，因为字符串是<strong>不可变类型</strong>，所以程序会生成一个新对象（值）：&lsquo;foo suffix&rsquo;，并让 in_func_obj 变量指向这个新对象；旧值（原始变量orig_obj指向的对象）则不受任何影响。</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img1_hu8231410190402015950.png 330w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img1_hu7938750083699360083.png 660w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img1_hu7036120487146961703.png 1024w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img1_hu6546682700013456618.png 2x"
        src="/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img1_hu7938750083699360083.png"
        alt=""
      />
      
      <figcaption>对字符串对象执行+=操作</figcaption>
    </figure>
  

</p>
<p>如果对象是<strong>可变的</strong>（比如列表），+= 操作就会直接原地修改 in_func_obj 变量所指向的值，而它同时也是原始变量 orig_obj 所指向的内容；待修改完成后，两个变量所指向的值（同一个）肯定就都受到了影响。</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img2_hu15591521753513300947.png 330w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img2_hu16061407852322574138.png 660w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img2_hu8829394220693184516.png 1024w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img2_hu16901520052330349956.png 2x"
        src="/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/img2_hu16061407852322574138.png"
        alt=""
      />
      
      <figcaption>对列表对象执行+=操作</figcaption>
    </figure>
  

</p>


<h3 class="relative group">6. 深拷贝与浅拷贝 
    <div id="6-%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#6-%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>假如我们想让两个变量（可变的）的修改操作互不影响，就需要拷贝变量所指向的可变对象，做到让不同变量指向不同对象。</p>
<p>按拷贝的深度，常用的拷贝操作可分为两种：浅拷贝与深拷贝。</p>


<h4 class="relative group">1. 浅拷贝 
    <div id="1-%E6%B5%85%E6%8B%B7%E8%B4%9D" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E6%B5%85%E6%8B%B7%E8%B4%9D" aria-label="锚点">#</a>
    </span>        
    
</h4>
<ol>
<li>使用copy模块下的 <code>copy()</code> 方法</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">copy</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">nums_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">nums</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 修改不再相互影响</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">nums</span><span class="p">,</span> <span class="n">nums_copy</span>
</span></span><span class="line"><span class="cl"><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span></span></code></pre></div><ol start="2">
<li>使用各容器类型的内置构造函数</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">d2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">nums_copy</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
</span></span></code></pre></div><ol start="3">
<li>进行全切片</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#nums_copy会变成 nums的浅拷贝</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">nums_copy</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[:]</span>
</span></span></code></pre></div><ol start="4">
<li>有些类型自身就提供了浅拷贝方法</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#列表有 copy方法</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">num</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">nums</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 字典也有 copy 方法</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">}</span>
</span></span></code></pre></div>

<h4 class="relative group">2. 深拷贝 
    <div id="2-%E6%B7%B1%E6%8B%B7%E8%B4%9D" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E6%B7%B1%E6%8B%B7%E8%B4%9D" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>但对于一些<strong>层层嵌套</strong>的复杂数据来说，浅拷贝仍然无法解决嵌套对象被修改的问题。</p>
<p>可以用 <code>copy.deepcopy()</code> 函数来进行深拷贝操作</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">items_deep</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</span></span></code></pre></div>

<h3 class="relative group">7. 对象的可哈希性 
    <div id="7-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%AF%E5%93%88%E5%B8%8C%E6%80%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#7-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%AF%E5%93%88%E5%B8%8C%E6%80%A7" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>计算哈希值的过程，是通过调用内置函数hash(obj)完成的。如果对象是可哈希的，hash函数会返回一个整型结果，否则将会报 TypeError 错误。</p>
<p>某种类型是否可哈希遵循下面的规则：</p>
<ul>
<li>所有的不可变内置类型，都是<strong>可哈希的</strong>，比如str、int、tuple、frozenset等；</li>
<li>所有的可变内置类型，都是<strong>不可哈希的</strong>，比如dict、list，set等；</li>
<li>对于不可变容器类型(tuple, frozenset)，仅当它的所有成员都不可变时，它自身才是可哈希的；</li>
<li>用户定义的类型默认都是可哈希的。谨记，只有可哈希的对象，才能放进集合或作为字典的键使用。</li>
</ul>

  



<div
  
    class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"
  >

  <span
    
      class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >只有可哈希的对象，才能放进集合或作为字典的键使用。</span>
</div>



<h3 class="relative group">8. 生成器 
    <div id="8-%E7%94%9F%E6%88%90%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#8-%E7%94%9F%E6%88%90%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>生成器（generator）是Python里的一种特殊的数据类型。顾名思义，它是一个不断给调用方“生成”内容的类型。定义一个生成器，需要用到生成器函数与 <strong>yield</strong> 关键字。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">generate_even</span><span class="p">(</span><span class="n">max_number</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;一个简单生成器，返回 0 到 max_number 之间的所有偶数&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_number</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">yield</span> <span class="n">i</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">generate_even</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span></code></pre></div><p>yield 和 return 的最大不同之处在于，return 的返回是一次性的，使用它会直接中断整个函数执行，而 yield 可以逐步给调用方生成结果：</p>
<p>(其实可以把生成器返回的值想象成一个可以迭代的 list，需要迭代得出。)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">generate_even</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span>
</span></span></code></pre></div><p>调用 <code>next()</code>可以逐步从生成器对象里拿到结果。</p>
<p>因为生成器是可迭代对象，所以你可以使用list()等函数方便地把它转换为各种其他容器类型：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">generate_even</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</span></span></code></pre></div>

<h2 class="relative group">第 4 章 条件分支控制流 
    <div id="%E7%AC%AC-4-%E7%AB%A0-%E6%9D%A1%E4%BB%B6%E5%88%86%E6%94%AF%E6%8E%A7%E5%88%B6%E6%B5%81" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%AC%AC-4-%E7%AB%A0-%E6%9D%A1%E4%BB%B6%E5%88%86%E6%94%AF%E6%8E%A7%E5%88%B6%E6%B5%81" aria-label="锚点">#</a>
    </span>        
    
</h2>


<h3 class="relative group">1. 分支惯用写法 
    <div id="1-%E5%88%86%E6%94%AF%E6%83%AF%E7%94%A8%E5%86%99%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E5%88%86%E6%94%AF%E6%83%AF%E7%94%A8%E5%86%99%E6%B3%95" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. 不要显式地和布尔值做比较 
    <div id="1-%E4%B8%8D%E8%A6%81%E6%98%BE%E5%BC%8F%E5%9C%B0%E5%92%8C%E5%B8%83%E5%B0%94%E5%80%BC%E5%81%9A%E6%AF%94%E8%BE%83" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E4%B8%8D%E8%A6%81%E6%98%BE%E5%BC%8F%E5%9C%B0%E5%92%8C%E5%B8%83%E5%B0%94%E5%80%BC%E5%81%9A%E6%AF%94%E8%BE%83" aria-label="锚点">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#不推荐的写法</span>
</span></span><span class="line"><span class="cl"><span class="c1"># if user.is_active_member() == True:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 推荐写法</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_active_member</span><span class="p">():</span>
</span></span></code></pre></div>

<h4 class="relative group">2. 省略零值判断 
    <div id="2-%E7%9C%81%E7%95%A5%E9%9B%B6%E5%80%BC%E5%88%A4%E6%96%AD" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E7%9C%81%E7%95%A5%E9%9B%B6%E5%80%BC%E5%88%A4%E6%96%AD" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>当我们需要在条件语句里做空值判断时，可以直接把代码简写成下面这样：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">if</span> <span class="ow">not</span> <span class="n">containers_count</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">fruits_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span></code></pre></div><blockquote>
<p>· 布尔值为假：None、0、False、[]、()、{}、set()、frozenset()，等等。<br>
· 布尔值为真：非0的数值、True，非空的序列、元组、字典，用户定义的类和实例，等等。</p>
</blockquote>


<h4 class="relative group">3. 与None比较时使用is运算符* 
    <div id="3-%E4%B8%8Enone%E6%AF%94%E8%BE%83%E6%97%B6%E4%BD%BF%E7%94%A8is%E8%BF%90%E7%AE%97%E7%AC%A6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-%E4%B8%8Enone%E6%AF%94%E8%BE%83%E6%97%B6%E4%BD%BF%E7%94%A8is%E8%BF%90%E7%AE%97%E7%AC%A6" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>当你需要判断某个对象是否是 <strong>None</strong>、<strong>True</strong>、<strong>False</strong>时，使用 is ，其他情况下，请使用 ==。</p>


<h3 class="relative group">2. 常用函数优化分支 
    <div id="2-%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E4%BC%98%E5%8C%96%E5%88%86%E6%94%AF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E4%BC%98%E5%8C%96%E5%88%86%E6%94%AF" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. 使用bisect优化范围类分支判断 
    <div id="1-%E4%BD%BF%E7%94%A8bisect%E4%BC%98%E5%8C%96%E8%8C%83%E5%9B%B4%E7%B1%BB%E5%88%86%E6%94%AF%E5%88%A4%E6%96%AD" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E4%BD%BF%E7%94%A8bisect%E4%BC%98%E5%8C%96%E8%8C%83%E5%9B%B4%E7%B1%BB%E5%88%86%E6%94%AF%E5%88%A4%E6%96%AD" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>当在每个 if/elif 语句后，都跟着一个分界点时，</p>
<p><code>bisect</code> 是 Python 内置的二分算法模块，它有一个同名函数 <code>bisect</code>，可以用来在有序列表里做二分查找。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">bisect</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 注意：用来做二分查找的容器必须是已经排好序的</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">breakpoints</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># bisect 函数会返回值在列表中的位置，0 代表相应的值位于第一个元素 10 之前</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">bisect</span><span class="o">.</span><span class="n">bisect</span><span class="p">(</span><span class="n">breakpoints</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 3 代表相应的值位于第三个元素 30 之后</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">bisect</span><span class="o">.</span><span class="n">bisect</span><span class="p">(</span><span class="n">breakpoints</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span>
</span></span></code></pre></div>

<h4 class="relative group">2. all()/any() 函数 
    <div id="2-allany-%E5%87%BD%E6%95%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-allany-%E5%87%BD%E6%95%B0" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p><code>all()</code> 和 <code>any()</code>。这两个函数接收一个可迭代对象作为参数，返回一个布尔值结果。顾名思义，这两个函数的行为如下。</p>
<ul>
<li>all(iterable)：仅当iterable中所有成员的布尔值都为真时返回 True，否则返回 False。</li>
<li>any(iterable)：只要iterable中任何一个成员的布尔值为真就返回 True，否则返回 False。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">all_numbers_gt_10_2</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">)</span>
</span></span></code></pre></div>

<h3 class="relative group">3. 其他技巧 
    <div id="3-%E5%85%B6%E4%BB%96%E6%8A%80%E5%B7%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-%E5%85%B6%E4%BB%96%E6%8A%80%E5%B7%A7" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. 要竭尽所能地避免分支嵌套 
    <div id="1-%E8%A6%81%E7%AB%AD%E5%B0%BD%E6%89%80%E8%83%BD%E5%9C%B0%E9%81%BF%E5%85%8D%E5%88%86%E6%94%AF%E5%B5%8C%E5%A5%97" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E8%A6%81%E7%AB%AD%E5%B0%BD%E6%89%80%E8%83%BD%E5%9C%B0%E9%81%BF%E5%85%8D%E5%88%86%E6%94%AF%E5%B5%8C%E5%A5%97" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>用一个简单的技巧来优化——<strong>“提前返回”</strong>。</p>
<p>“提前返回”指的是：当你在编写分支时，首先找到那些会中断执行的条件，把它们移到函数的最前面，然后在分支里直接使用 <code>return</code> 或 <code>raise</code> 结束执行。</p>


<h4 class="relative group">2. 德摩根定律 
    <div id="2-%E5%BE%B7%E6%91%A9%E6%A0%B9%E5%AE%9A%E5%BE%8B" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E5%BE%B7%E6%91%A9%E6%A0%B9%E5%AE%9A%E5%BE%8B" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>德摩根定律”告诉了我们这么一件事：</p>
<p><strong>not A or not B等价于not (A and B)。</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#如果用户没有登录或者用户没有使用Chrome，拒绝提供服务</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="o">.</span><span class="n">has_logged_in</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">user</span><span class="o">.</span><span class="n">is_from_chrome</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s2">&#34;our service is only available for chrome logged in user&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 等价于下面</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">has_logged_in</span> <span class="ow">and</span> <span class="n">user</span><span class="o">.</span><span class="n">is_from_chrome</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s2">&#34;our service is only available for chrome logged in user&#34;</span>
</span></span></code></pre></div>

<h4 class="relative group">3. and和or的运算优先级 
    <div id="3-and%E5%92%8Cor%E7%9A%84%E8%BF%90%E7%AE%97%E4%BC%98%E5%85%88%E7%BA%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-and%E5%92%8Cor%E7%9A%84%E8%BF%90%E7%AE%97%E4%BC%98%E5%85%88%E7%BA%A7" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>and 运算符的优先级高于 or ！</p>


<h4 class="relative group">4. or运算符的陷阱 
    <div id="4-or%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E9%99%B7%E9%98%B1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4-or%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E9%99%B7%E9%98%B1" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>使用 a or b 来表示 “ a为空时用b代替” 的写法非常常见。</p>
<p>但是，因为or计算的是变量的布尔真假值，所以不光是None，0、[]、{}以及其他所有布尔值为假的东西，都会在or运算中被忽略：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#所有的0、空列表、空字符串等，都是布尔假值</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="nb">bool</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">bool</span><span class="p">([]),</span> <span class="nb">bool</span><span class="p">({}),</span> <span class="nb">bool</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">set</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></span></code></pre></div><p>所以在使用 a or b 时候，一定要注意变量的布尔值真假。</p>


<h2 class="relative group">第 5 章 异常与错误处理 
    <div id="%E7%AC%AC-5-%E7%AB%A0-%E5%BC%82%E5%B8%B8%E4%B8%8E%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%AC%AC-5-%E7%AB%A0-%E5%BC%82%E5%B8%B8%E4%B8%8E%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>本章主要是作者对异常处理的经验和技巧。</p>


<h3 class="relative group">1. 异常捕获的经验技巧 
    <div id="1-%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7%E7%9A%84%E7%BB%8F%E9%AA%8C%E6%8A%80%E5%B7%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7%E7%9A%84%E7%BB%8F%E9%AA%8C%E6%8A%80%E5%B7%A7" aria-label="锚点">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1. 优先使用异常捕获 
    <div id="1-%E4%BC%98%E5%85%88%E4%BD%BF%E7%94%A8%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-%E4%BC%98%E5%85%88%E4%BD%BF%E7%94%A8%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>Python社区明显偏爱基于异常捕获的EAFP（asier to ask for forgiveness than permission）风格。</p>
<p>EAFP编程风格更为简单直接，它总是直奔主流程而去，把意外情况都放在异常处理try/except块内消化掉。</p>
<blockquote>
<p>所以，每当直觉驱使你写下if/else来进行错误分支判断时，请先把这份冲动放一边，考虑用try来捕获异常是不是更合适。</p>
</blockquote>


<h4 class="relative group">2. try/except结构 
    <div id="2-tryexcept%E7%BB%93%E6%9E%84" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-tryexcept%E7%BB%93%E6%9E%84" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>常见的 try/except 基础语法如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">safe_int</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;尝试把输入转换为整数&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 当某类异常被抛出时，将会执行对应 except 下的语句</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;type error: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s1"> is invalid&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 你可以在一个 try 语句块下写多个 except</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;value error: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1"> is invalid&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">finally</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># finally 里的语句，无论如何都会被执行，哪怕已经执行了return</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;function completed&#39;</span><span class="p">)</span>
</span></span></code></pre></div>

<h4 class="relative group">3. 把更精确的 except 语句放在前面 
    <div id="3-%E6%8A%8A%E6%9B%B4%E7%B2%BE%E7%A1%AE%E7%9A%84-except-%E8%AF%AD%E5%8F%A5%E6%94%BE%E5%9C%A8%E5%89%8D%E9%9D%A2" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-%E6%8A%8A%E6%9B%B4%E7%B2%BE%E7%A1%AE%E7%9A%84-except-%E8%AF%AD%E5%8F%A5%E6%94%BE%E5%9C%A8%E5%89%8D%E9%9D%A2" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>如果一个try代码块里包含多条 except，异常匹配会按照从上而下的顺序进行。</p>
<p>这时，假如你不小心把一个比较模糊的<strong>父类异常</strong>放在前面，就会导致在下面的 except 永远不会被触发。</p>
<p>所以，把更精确的异常放在前面。</p>
<p>Python 的内置异常类之间存在许多继承关系，具体可以看<a href="https://python3.info/basics/exception/hierarchy.html"   target="_blank">
    Python3.info</a>。</p>
<p>




  
  
    
  
  
    <figure>
      
      <img
        class="my-0 rounded-md"
        loading="lazy"
        srcset="
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/exception-hierarchy_hu8333312555797437336.png 330w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/exception-hierarchy_hu6997822830300786744.png 660w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/exception-hierarchy_hu17885331664793778889.png 1024w,
        /booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/exception-hierarchy_hu17768698748314575967.png 2x"
        src="/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8A/exception-hierarchy_hu6997822830300786744.png"
        alt=""
      />
      
      <figcaption>Exception Hierarchy</figcaption>
    </figure>
  

</p>


<h4 class="relative group">4. else 分支 
    <div id="4-else-%E5%88%86%E6%94%AF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4-else-%E5%88%86%E6%94%AF" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>如果使用 try 语句块里的 else 分支，代码可以变得更简单：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">sync_profile</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">to_external</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Error while syncing user profile&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">send_notification</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s1">&#39;profile sync succeeded&#39;</span><span class="p">)</span>
</span></span></code></pre></div><p>异常捕获语句里的 else 表示：仅当 try 语句块里没抛出任何异常时，才执行 else 分支下的内容，效果就像在 try 最后增加一个标记变量一样。</p>
<blockquote>
<p>和finally语句不同，假如程序在执行try代码块时碰到了return或break等跳转语句，中断了本次异常捕获，那么即便代码没抛出任何异常，else分支内的逻辑也<strong>不会</strong>被执行。</p>
</blockquote>


<h4 class="relative group">5. raise 语句 
    <div id="5-raise-%E8%AF%AD%E5%8F%A5" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#5-raise-%E8%AF%AD%E5%8F%A5" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>在 Python 中，<code>raise</code> 语句用于引发一个异常，即中断程序的正常流程并生成一个错误。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&#34;这是一个一般性的错误&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 输出</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Traceback (most recent call last):</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Exception: 这是一个一般性的错误</span>
</span></span></code></pre></div><p>当我们想仅仅想记录下某个异常，然后把它重新抛出时，可以使用不带任何参数的 <code>raise</code> 语句。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">incr_by_key</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1"> does not exists, re-raise the exception&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span>
</span></span></code></pre></div><p>当一个空 raise 语句出现在 except 块里时，它会原封不动地重新抛出当前异常及异常类型。</p>


<h4 class="relative group">6. 可以自定义异常类 
    <div id="6-%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E7%B1%BB" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#6-%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E7%B1%BB" aria-label="锚点">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CreateItemError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;创建 Item 失败&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">create_item</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;创建一个新的Item
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    :raises: 当无法创建时抛出 CreateItemError
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">MAX_LENGTH_OF_NAME</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="n">CreateItemError</span><span class="p">(</span><span class="s1">&#39;name of item is too long&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">get_current_items</span><span class="p">())</span> <span class="o">&gt;</span> <span class="n">MAX_ITEMS_QUOTA</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="n">CreateItemError</span><span class="p">(</span><span class="s1">&#39;items is full&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Item</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">),</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">create_from_input</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">item</span> <span class="o">=</span> <span class="n">create_item</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="n">CreateItemError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;create item failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;item&lt;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&gt; created&#39;</span><span class="p">)</span>
</span></span></code></pre></div>

<h4 class="relative group">7. 不要手动做数据校验 
    <div id="7-%E4%B8%8D%E8%A6%81%E6%89%8B%E5%8A%A8%E5%81%9A%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#7-%E4%B8%8D%E8%A6%81%E6%89%8B%E5%8A%A8%E5%81%9A%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>在编写代码时，<strong>我们应当尽量避免手动校验任何数据。</strong>
因为数据校验任务独立性很强，所以应该引入合适的第三方校验模块（或者自己实现），让它们来处理这部分专业工作。</p>
<blockquote>
<p>假如你在开发Web应用，数据校验工作通常来说比较容易。比如Django框架就有自己的表单验证模块，Flask也可以使用WTForms模块来进行数据校验。</p>
</blockquote>


<h2 class="relative group">第 6 章 循环与可迭代对象 
    <div id="%E7%AC%AC-6-%E7%AB%A0-%E5%BE%AA%E7%8E%AF%E4%B8%8E%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%AC%AC-6-%E7%AB%A0-%E5%BE%AA%E7%8E%AF%E4%B8%8E%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1" aria-label="锚点">#</a>
    </span>        
    
</h2>
<p>本章主要是分享在 Python 里编写循环的一些经验和技巧，重点时迭代器与迭代器的使用。</p>


<h3 class="relative group">1. iter() 与 next() 内置函数 
    <div id="1-iter-%E4%B8%8E-next-%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1-iter-%E4%B8%8E-next-%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p><code>iter()</code> 会尝试返回一个迭代器对象</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">list_iterator</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x101a82d90</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">iter</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">str_iterator</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x101a99ed0</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">iter</span><span class="err">（</span><span class="mi">1</span><span class="err">）</span>
</span></span><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="ne">TypeError</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span> <span class="nb">object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">iterable</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 对不可迭代的类型执行iter()会抛出TypeError异常</span>
</span></span></code></pre></div><p><strong>什么是迭代器（iterator）？</strong></p>
<p>顾名思义，这是一种帮助你迭代其他对象的对象。迭代器最鲜明的特征是：不断对它执行 <code>next()</code> 函数会返回下一次迭代结果。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 首先通过 iter 函数拿到列表 l 的迭代器对象</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">iter_l</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">iter_l</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">list_iterator</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x101a8c6d0</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 然后对迭代器调用next() 不断获取列表的下一个值</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">iter_l</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;foo&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">iter_l</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;bar&#39;</span>
</span></span></code></pre></div><p>当迭代器没有更多值可以返回时，便会抛出 <strong>StopIteration</strong> 异常。</p>


<h3 class="relative group">2. 自定义迭代器 
    <div id="2-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%AD%E4%BB%A3%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#2-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%AD%E4%BB%A3%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>要自定义一个迭代器类型，关键在于实现下面这两个魔法方法：</p>
<blockquote>
<p>· <code>__iter__</code> ：调用iter()时触发，迭代器对象总是返回自身。</p>
<p>· <code>__next__</code> ：调用next()时触发，通过 return 来返回结果，没有更多内容就抛出 StopIteration 异常，会在迭代过程中多次触发。</p>
</blockquote>


<h3 class="relative group">3. 生成器是迭代器 
    <div id="3-%E7%94%9F%E6%88%90%E5%99%A8%E6%98%AF%E8%BF%AD%E4%BB%A3%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#3-%E7%94%9F%E6%88%90%E5%99%A8%E6%98%AF%E8%BF%AD%E4%BB%A3%E5%99%A8" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>生成器还是一种简化的迭代器实现, 使用它可以大大降低实现传统迭代器的编码成本。
基本不需要通过 <code>__iter__</code> 和 <code>__next__</code> 来实现迭代器，只要写上几个 <code>yield</code> 就行。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">range_7_gen</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;生成器版本的Range7Iterator&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">num</span> <span class="o">=</span> <span class="n">start</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">num</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">num</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="s1">&#39;7&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">            <span class="k">yield</span> <span class="n">num</span>
</span></span><span class="line"><span class="cl">        <span class="n">num</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span></code></pre></div><p>我们可以用 <code>iter()</code> 和 <code>next()</code> 函数来验证“生成器就是迭代器”这个事实：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">nums</span> <span class="o">=</span> <span class="n">range_7_gen</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用iter() 函数测试</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">iter</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="n">range_7_gen</span> <span class="n">at</span> <span class="mh">0x10404b2e0</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">iter</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="ow">is</span> <span class="n">nums</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用next() 不断获取下一个值</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">7</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">14</span>
</span></span></code></pre></div><p><strong>生成器（generator）</strong> 利用其简单的语法，大大降低了迭代器的使用门槛，是优化循环代码时最得力的帮手。</p>


<h3 class="relative group">4. 修饰可迭代对象优化循环 
    <div id="4-%E4%BF%AE%E9%A5%B0%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%8C%96%E5%BE%AA%E7%8E%AF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#4-%E4%BF%AE%E9%A5%B0%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%8C%96%E5%BE%AA%E7%8E%AF" aria-label="锚点">#</a>
    </span>        
    
</h3>
<p>这里主要讲的是一种循环代码的优化思路，通过<em>修饰可迭代对象来优化循环</em>。</p>
<p>通俗的来讲其实就是：迭代（迭代器）。可以类比与 <code>enumerate</code> 的做法。</p>
<blockquote>
<p>“修饰可迭代对象”是指用生成器（或普通的迭代器）在<strong>循环外部包装</strong>原本的循环主体，完成一些原本必须在循环内部执行的工作——比如过滤特定成员、提供额外结果等，以此简化循环代码。</p>
</blockquote>


<h4 class="relative group">5. 读取大文件 
    <div id="5-%E8%AF%BB%E5%8F%96%E5%A4%A7%E6%96%87%E4%BB%B6" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#5-%E8%AF%BB%E5%8F%96%E5%A4%A7%E6%96%87%E4%BB%B6" aria-label="锚点">#</a>
    </span>        
    
</h4>
<p>调用 <code>file.read(chunk_size)</code> ,会马上读取从当前游标位置往后 chunk_size 大小的文件内容. 解决读取大文件的性能问题。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">count_digits_v3</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="n">block_size</span> <span class="o">=</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">8</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 使用functools.partial 构造一个新的无须参数的函数</span>
</span></span><span class="line"><span class="cl">        <span class="n">_read</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">,</span> <span class="n">block_size</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 利用iter() 构造一个不断调用_read 的迭代器</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="n">_read</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">count</span>
</span></span></code></pre></div>
        </div>
        
        

        
<details style="margin-left:0px" class="mt-2 mb-5 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5">
    
    <summary
        class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-primary-800 dark:text-neutral-100">
        《Python工匠》 - 这篇文章属于一个选集。
    </summary>
    
    
    
    <div
        class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
        § 0: 本文
    </div>
    
    
    
    <div
        class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
        <a href="https://lcenarthas.github.io/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8B/">
            § 1: 《Pyhotn工匠——案例、技巧与工程实践》（下）
        </a>
    </div>
    
    


</details>

        

        


<h2 class="mt-8 text-2xl font-extrabold mb-10">相关文章</h2>
<section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3">
  
  

  <a href="/blog/github-%E9%82%AE%E7%AE%B1%E6%9B%B4%E6%94%B9%E4%B9%8B%E5%90%8E/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">
        
        <div class="w-full thumbnail_card_related nozoom" style="background-image:url(/blog/github-%E9%82%AE%E7%AE%B1%E6%9B%B4%E6%94%B9%E4%B9%8B%E5%90%8E/feature_hu3792213073171399374.png);"></div>
        
      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/blog/github-%E9%82%AE%E7%AE%B1%E6%9B%B4%E6%94%B9%E4%B9%8B%E5%90%8E/">Github 邮箱更改之后</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          











  





  



  



  



  









<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-06-29 17:20:56 &#43;0800 &#43;0800">2024-06-29</time><span class="px-2 text-primary-500">&middot;</span><span>1348 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">3 分钟</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="views_blog/Github 邮箱更改之后/index.md" class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title="views">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="likes_blog/Github 邮箱更改之后/index.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

</span>
</span>
  

  
  
</div>


<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
</div>




<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E6%8A%80%E6%9C%AF/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    技术
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/github/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Github
  </span>
</span>
  </span>
  
  
  
  
</div>



        </div>

        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
  

  <a href="/blog/%E5%85%B3%E4%BA%8E-contribution-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">
        
        <div class="w-full thumbnail_card_related nozoom" style="background-image:url(/blog/%E5%85%B3%E4%BA%8E-contribution-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/feature_hu1512955500307278229.jpg);"></div>
        
      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/blog/%E5%85%B3%E4%BA%8E-contribution-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/">关于 Contribution 的那些事</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          











  





  



  



  



  









<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-06-25 23:59:56 &#43;0800 &#43;0800">2024-06-25</time><span class="px-2 text-primary-500">&middot;</span><span>4023 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">9 分钟</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="views_blog/关于 Contribution 的那些事/index.md" class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title="views">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="likes_blog/关于 Contribution 的那些事/index.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

</span>
</span>
  

  
  
</div>


<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
</div>




<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E6%8A%80%E6%9C%AF/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    技术
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E5%BC%80%E6%BA%90/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    开源
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/github/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Github
  </span>
</span>
  </span>
  
  
  
  
</div>



        </div>

        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
  

  <a href="/blog/%E4%B8%80%E4%BA%9B%E6%9C%89%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0%E6%8A%80%E6%9C%AF%E7%AF%87/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">
        
        <div class="w-full thumbnail_card_related nozoom" style="background-image:url(/blog/%E4%B8%80%E4%BA%9B%E6%9C%89%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0%E6%8A%80%E6%9C%AF%E7%AF%87/feature_hu9768281257411513083.jpg);"></div>
        
      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/blog/%E4%B8%80%E4%BA%9B%E6%9C%89%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0%E6%8A%80%E6%9C%AF%E7%AF%87/">一些有趣的文章（技术篇）</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          











  





  



  



  



  









<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-06-23 16:29:44 &#43;0800 &#43;0800">2024-06-23</time><span class="px-2 text-primary-500">&middot;</span><span>34 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">1 分钟</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="views_blog/一些有趣的文章（技术篇）/index.md" class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title="views">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="likes_blog/一些有趣的文章（技术篇）/index.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

</span>
</span>
  

  
  
</div>


<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
</div>




<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E9%93%BE%E6%8E%A5/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    链接🔗
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E8%BD%AC%E5%8F%91/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    转发
  </span>
</span>
  </span>
  
  
  
  
</div>



        </div>

        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
  

  <a href="/blog/github-action-&#43;-%E5%9F%BA%E4%BA%8E-github-page-blog-%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">
        
        <div class="w-full thumbnail_card_related nozoom" style="background-image:url(/blog/github-action-&#43;-%E5%9F%BA%E4%BA%8E-github-page-blog-%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/feature_hu8918995235412570169.png);"></div>
        
      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/blog/github-action-&#43;-%E5%9F%BA%E4%BA%8E-github-page-blog-%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/">Github Action + 基于 Github Page Blog 自动发布</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          











  





  



  



  



  









<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-06-15 16:04:46 &#43;0800 &#43;0800">2024-06-15</time><span class="px-2 text-primary-500">&middot;</span><span>2114 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">5 分钟</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="views_blog/Github Action &#43; 基于 Github Page Blog 自动发布/index.md" class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title="views">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="likes_blog/Github Action &#43; 基于 Github Page Blog 自动发布/index.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

</span>
</span>
  

  
  
</div>


<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
</div>




<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E6%8A%80%E6%9C%AF/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    技术
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/github/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Github
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/github-action/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Github Action
  </span>
</span>
  </span>
  
  
  
  
</div>



        </div>

        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
  

  <a href="/about/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative">
        
        <div class="w-full thumbnail_card_related nozoom" style="background-image:url(/img/wallhaven-x87q3z_hu1062863261944044396.jpg);"></div>
        
      

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/about/">About</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          











  





  



  



  



  









<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-06-02 17:56:42 &#43;0800 &#43;0800">2024-06-02</time><span class="px-2 text-primary-500">&middot;</span><span>40 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">1 分钟</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="views_about.md" class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title="views">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="likes_about.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

</span>
</span>
  

  
  
</div>


<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
</div>




<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>



        </div>

        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
</section>

  
      </div>
     
      
      
        
        
          
          
        
      <script>
        var oid = "views_booknote\/Python工匠（上）\/index.md"
        var oid_likes = "likes_booknote\/Python工匠（上）\/index.md"
      </script>
      
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/booknote/python%E5%B7%A5%E5%8C%A0%E4%B8%8B/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >《Pyhotn工匠——案例、技巧与工程实践》（下）</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2024-07-21 16:40:02 &#43;0800 &#43;0800">2024-07-21</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="返回顶部" title="返回顶部">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
    <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/tags/"
            title="">
            
            Tags
          </a>
        </li>
        
      </ul>
    </nav>
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2024
      White Liu
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a> 强力驱动
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
  <a rel="me" href="https://masto.ai/@blowfish"></a>
  
</footer><div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="https://lcenarthas.github.io/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="搜索"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="关闭 (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
